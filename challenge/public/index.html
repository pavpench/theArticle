<html lang="en">
  <head>
    <title>Braineffect - Challenge</title>
    <style type="text/css">
      * {
        margin: 0;
        padding: 0;
        font-family: "Poppins", sans-serif;
        font-size: 1.1rem;
      }
      body {
        background-color: #ffffff;
      }
      nav {
        position: relative;
        margin: 0.6rem;
        width: 35vw;
        height: 3.2rem;
      }
      #progressBar {
        position: absolute;
        margin: 0.3 auto;
        height: 3.2rem;
        left: 1rem;
        background-color: #ffffff;
        box-shadow: 25px 15px 0px #93a0ac97;
        border-radius: 0px 0px 12px 50px;
        --scrollAmount: 0%;
        width: var(--scrollAmount);
      }
      .msg-screen {
        position: absolute;
        left: 1.7rem;
        top: 0.6rem;
        margin: 0.3rem auto;
        width: 35vw;
        height: 70%;
        background: #ffffffec;
        box-shadow: 3px 3px 0px #b1c0cece, -3px -3px 0px #b1c0cece;
        border-radius: 0px 0px 6px 20px;
      }
      .msg-screen h1 {
        width: 17rem;
        margin: 0 auto;
        padding: 0.3rem;
      }
      .modal {
        display: none;
        position: fixed;
        z-index: 1;
        width: 100%;
        height: 100%;
        background-color: rgb(0, 0, 0);
        background-color: rgba(0, 0, 0, 0.4);
      }
      #login_form {
        display: none;
        background-color: #fefefe;
        margin: 15% auto;
        padding: 2rem;
        border: 1px solid #888;
        width: 25%;
        height: 10rem;
      }
      #userDataPresent {
        display: none;
        background-color: #fefefe;
        margin: 15% auto;
        padding: 2rem;
        border: 1px solid #888;
        width: 35%;
        height: 10rem;
      }

      main h1,
      main h2 {
        margin: 1.2rem;
      }
      #article {
        width: 60vw;
        height: 75vh;
        margin: 2rem auto;
        padding: 1.2rem;
        overflow-y: scroll;
      }
      p {
        text-indent: 1.2rem;
        padding: 0.3rem;
      }
    </style>
  </head>
  <body>
    <nav class="read-progress">
      <div id="progressBar"> </div>
      <div class="msg-screen">
        <h1 id="welcomeMSG"> Welcome to the Article </h1>
      </div>
    </nav>
    <main>
      <div class="modal">
        <form id="login_form">
          <label for="fname">Please introduce yourself...</label>
          <input type="text" id="fname" size="15" placeholder="First name" />
          <button id="btn_submit">Submit</button>
        </form>
        <div id="userDataPresent">
          <h3 id="thankYou"></h3>
          <p id="timeStarted"></p>
          <p id="timeSpent"></p>
          <p id="finnished"></p>
          <button id="userDataModalHide"> Thank you</button>
        </div>
      </div>
      <section id="article">
        <h1>HTML Ipsum Presents</h1>

        <p
          >Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec
          odio. Praesent libero. Sed cursus ante dapibus diam. Sed nisi. Nulla
          quis sem at nibh elementum imperdiet. Duis sagittis ipsum. Praesent
          mauris. Fusce nec tellus sed augue semper porta. Mauris massa.
          Vestibulum lacinia arcu eget nulla.
        </p>

        <p
          >Class aptent taciti sociosqu ad litora torquent per conubia nostra,
          per inceptos himenaeos.
          <b>Lorem ipsum dolor sit amet, consectetur adipiscing elit</b>.
          Curabitur sodales ligula in libero. Sed dignissim lacinia nunc.
          Curabitur tortor. Pellentesque nibh. Aenean quam. In scelerisque sem
          at dolor. Maecenas mattis. Sed convallis tristique sem.
          <b>Vestibulum lacinia arcu eget nulla</b>. Proin ut ligula vel nunc
          egestas porttitor. Morbi lectus risus, iaculis vel, suscipit quis,
          luctus non, massa. Fusce ac turpis quis ligula lacinia aliquet. Mauris
          ipsum. Nulla metus metus, ullamcorper vel, tincidunt sed, euismod in,
          nibh.
        </p>

        <p
          >Quisque volutpat condimentum velit. Class aptent taciti sociosqu ad
          litora torquent per conubia nostra, per inceptos himenaeos. Nam nec
          ante. <i>Curabitur tortor</i>. Sed lacinia, urna non tincidunt mattis,
          tortor neque adipiscing diam, a cursus ipsum ante quis turpis. Nulla
          facilisi. Ut fringilla. Suspendisse potenti. Nunc feugiat mi a tellus
          consequat imperdiet.
          <b>Fusce ac turpis quis ligula lacinia aliquet</b>. Vestibulum sapien.
          <i>In scelerisque sem at dolor</i>. Proin quam. Etiam ultrices.
          <b>Nam nec ante</b>. Suspendisse in justo eu magna luctus suscipit.
          Sed lectus.
        </p>

        <p
          >Integer euismod lacus luctus magna. Quisque cursus, metus vitae
          pharetra auctor, sem massa mattis sem, at interdum magna augue eget
          diam. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices
          posuere cubilia Curae; Morbi lacinia molestie dui. Praesent blandit
          dolor.
          <i
            >Morbi lectus risus, iaculis vel, suscipit quis, luctus non,
            massa</i
          >. Sed non quam. In vel mi sit amet augue congue elementum. Morbi in
          ipsum sit amet pede facilisis laoreet. Donec lacus nunc, viverra nec,
          blandit vel, egestas et, augue. Vestibulum tincidunt malesuada tellus.
          Ut ultrices ultrices enim. Curabitur sit amet mauris. Morbi in dui
          quis est pulvinar ullamcorper. Nulla facilisi. Integer lacinia
          sollicitudin massa.
        </p>

        <p
          >Cras metus. Sed aliquet risus a tortor. Integer id quam. Morbi mi.
          <b>Curabitur sit amet mauris</b>. Quisque nisl felis, venenatis
          tristique, dignissim in, ultrices sit amet, augue. Proin sodales
          libero eget ante. Nulla quam. Aenean laoreet. Vestibulum nisi lectus,
          commodo ac, facilisis ac, ultricies eu, pede. Ut orci risus, accumsan
          porttitor, cursus quis, aliquet eget, justo. Sed pretium blandit orci.
        </p>

        <p
          ><i>Sed non quam</i>. Ut eu diam at pede suscipit sodales. Aenean
          lectus elit, fermentum non, convallis id, sagittis at, neque. Nullam
          mauris orci, aliquet et, iaculis et, viverra vitae, ligula. Nulla ut
          felis in purus aliquam imperdiet. Maecenas aliquet mollis lectus.
          Vivamus consectetuer risus et tortor. Lorem ipsum dolor sit amet,
          consectetur adipiscing elit. Integer nec odio. Praesent libero.
          <b
            >Vestibulum nisi lectus, commodo ac, facilisis ac, ultricies eu,
            pede</b
          >. Sed cursus ante dapibus diam. Sed nisi. Nulla quis sem at nibh
          elementum imperdiet. Duis sagittis ipsum.
        </p>

        <p
          >Praesent mauris. <b>Integer nec odio</b>. Fusce nec tellus sed augue
          semper porta. Mauris massa. Vestibulum lacinia arcu eget nulla. Class
          aptent taciti sociosqu ad litora torquent per conubia nostra, per
          inceptos himenaeos. Curabitur sodales ligula in libero. Sed dignissim
          lacinia nunc. Curabitur tortor. <i>Integer nec odio</i>. Pellentesque
          nibh. Aenean quam. In scelerisque sem at dolor. Maecenas mattis.
          <b>Fusce nec tellus sed augue semper porta</b>. Sed convallis
          tristique sem. Proin ut ligula vel nunc egestas porttitor.
        </p>

        <p
          ><i>Duis sagittis ipsum</i>. Morbi lectus risus, iaculis vel, suscipit
          quis, luctus non, massa. Fusce ac turpis quis ligula lacinia aliquet.
          Mauris ipsum. Nulla metus metus, ullamcorper vel, tincidunt sed,
          euismod in, nibh. Quisque volutpat condimentum velit. Class aptent
          taciti sociosqu ad litora torquent per conubia nostra, per inceptos
          himenaeos. Nam nec ante. Sed lacinia, urna non tincidunt mattis,
          tortor neque adipiscing diam, a cursus ipsum ante quis turpis. Nulla
          facilisi. Ut fringilla.
          <b
            >Morbi lectus risus, iaculis vel, suscipit quis, luctus non,
            massa</b
          >. Suspendisse potenti. Nunc feugiat mi a tellus consequat imperdiet.
        </p>

        <p
          >Vestibulum sapien. Proin quam. Etiam ultrices. Suspendisse in justo
          eu magna luctus suscipit. Sed lectus. Integer euismod lacus luctus
          magna. Quisque cursus, metus vitae pharetra auctor, sem massa mattis
          sem, at interdum magna augue eget diam. Vestibulum ante ipsum primis
          in faucibus orci luctus et ultrices posuere cubilia Curae; Morbi
          lacinia molestie dui. Praesent blandit dolor. Sed non quam. In vel mi
          sit amet augue congue elementum.
        </p>

        <p
          >Morbi in ipsum sit amet pede facilisis laoreet.
          <i
            >Class aptent taciti sociosqu ad litora torquent per conubia nostra,
            per inceptos himenaeos</i
          >. Donec lacus nunc, viverra nec, blandit vel, egestas et, augue.
          Vestibulum tincidunt malesuada tellus. Ut ultrices ultrices enim.
          Curabitur sit amet mauris. Morbi in dui quis est pulvinar ullamcorper.
          Nulla facilisi. <b>Praesent blandit dolor</b>. Integer lacinia
          sollicitudin massa. <b>Praesent blandit dolor</b>. Cras metus. Sed
          aliquet risus a tortor. Integer id quam.
        </p>

        <p
          >Morbi mi. Quisque nisl felis, venenatis tristique, dignissim in,
          ultrices sit amet, augue.
          <i>Suspendisse in justo eu magna luctus suscipit</i>. Proin sodales
          libero eget ante. Nulla quam. Aenean laoreet. Vestibulum nisi lectus,
          commodo ac, facilisis ac, ultricies eu, pede. Ut orci risus, accumsan
          porttitor, cursus quis, aliquet eget, justo. Sed pretium blandit orci.
          Ut eu diam at pede suscipit sodales.
          <b>Proin sodales libero eget ante</b>. Aenean lectus elit, fermentum
          non, convallis id, sagittis at, neque. Nullam mauris orci, aliquet et,
          iaculis et, viverra vitae, ligula.
        </p>

        <p
          >Nulla ut felis in purus aliquam imperdiet. Maecenas aliquet mollis
          lectus. Vivamus consectetuer risus et tortor. Lorem ipsum dolor sit
          amet, consectetur adipiscing elit. Integer nec odio. Praesent libero.
          Sed cursus ante dapibus diam. Sed nisi. Nulla quis sem at nibh
          elementum imperdiet. Duis sagittis ipsum. Praesent mauris. Fusce nec
          tellus sed augue semper porta. Mauris massa. Vestibulum lacinia arcu
          eget nulla.
        </p>

        <p
          >Class aptent taciti sociosqu ad litora torquent per conubia nostra,
          per inceptos himenaeos. <b>Praesent libero</b>. Curabitur sodales
          ligula in libero. Sed dignissim lacinia nunc.
          <b>Duis sagittis ipsum</b>. Curabitur tortor. Pellentesque nibh.
          <i>Praesent libero</i>. Aenean quam. In scelerisque sem at dolor.
          <b>Duis sagittis ipsum</b>. Maecenas mattis. Sed convallis tristique
          sem. Proin ut ligula vel nunc egestas porttitor. Morbi lectus risus,
          iaculis vel, suscipit quis, luctus non, massa. Fusce ac turpis quis
          ligula lacinia aliquet. Mauris ipsum. Nulla metus metus, ullamcorper
          vel, tincidunt sed, euismod in, nibh.
        </p>

        <p
          >Quisque volutpat condimentum velit. Class aptent taciti sociosqu ad
          litora torquent per conubia nostra, per inceptos himenaeos. Nam nec
          ante. Sed lacinia, urna non tincidunt mattis, tortor neque adipiscing
          diam, a cursus ipsum ante quis turpis. Nulla facilisi. Ut fringilla.
          Suspendisse potenti. Nunc feugiat mi a tellus consequat imperdiet.
          Vestibulum sapien. Proin quam. Etiam ultrices.
        </p>

        <p
          >Suspendisse in justo eu magna luctus suscipit. Sed lectus.
          <b>Ut fringilla</b>. Integer euismod lacus luctus magna. Quisque
          cursus, metus vitae pharetra auctor, sem massa mattis sem, at interdum
          magna augue eget diam. Vestibulum ante ipsum primis in faucibus orci
          luctus et ultrices posuere cubilia Curae; Morbi lacinia molestie dui.
          Praesent blandit dolor. Sed non quam. In vel mi sit amet augue congue
          elementum. <i>Suspendisse potenti</i>. Morbi in ipsum sit amet pede
          facilisis laoreet. Donec lacus nunc, viverra nec, blandit vel, egestas
          et, augue. Vestibulum tincidunt malesuada tellus. Ut ultrices ultrices
          enim. Curabitur sit amet mauris.
        </p>

        <p
          ><b>Integer euismod lacus luctus magna</b>. Morbi in dui quis est
          pulvinar ullamcorper. Nulla facilisi. Integer lacinia sollicitudin
          massa. <i>Vestibulum sapien</i>. Cras metus. Sed aliquet risus a
          tortor. Integer id quam. Morbi mi. Quisque nisl felis, venenatis
          tristique, dignissim in, ultrices sit amet, augue. Proin sodales
          libero eget ante.
          <i>Morbi in ipsum sit amet pede facilisis laoreet</i>. Nulla quam.
          Aenean laoreet.
        </p>

        <h2>Header Level 2</h2>

        <p
          ><b>Integer lacinia sollicitudin massa</b>. Vestibulum nisi lectus,
          commodo ac, facilisis ac, ultricies eu, pede. Ut orci risus, accumsan
          porttitor, cursus quis, aliquet eget, justo. <b>Integer id quam</b>.
          Sed pretium blandit orci. Ut eu diam at pede suscipit sodales. Aenean
          lectus elit, fermentum non, convallis id, sagittis at, neque. Nullam
          mauris orci, aliquet et, iaculis et, viverra vitae, ligula. Nulla ut
          felis in purus aliquam imperdiet. Maecenas aliquet mollis lectus.
          Vivamus consectetuer risus et tortor.
          <b
            >Vestibulum nisi lectus, commodo ac, facilisis ac, ultricies eu,
            pede</b
          >. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer
          nec odio.
        </p>

        <p
          >Praesent libero. <b>Sed pretium blandit orci</b>. Sed cursus ante
          dapibus diam. Sed nisi. Nulla quis sem at nibh elementum imperdiet.
          Duis sagittis ipsum. Praesent mauris. Fusce nec tellus sed augue
          semper porta.
          <b>Lorem ipsum dolor sit amet, consectetur adipiscing elit</b>. Mauris
          massa. <b>Sed cursus ante dapibus diam</b>. Vestibulum lacinia arcu
          eget nulla. Class aptent taciti sociosqu ad litora torquent per
          conubia nostra, per inceptos himenaeos. Curabitur sodales ligula in
          libero. Sed dignissim lacinia nunc.
        </p>

        <p
          >Curabitur tortor. Pellentesque nibh. Aenean quam. In scelerisque sem
          at dolor. Maecenas mattis. Sed convallis tristique sem. Proin ut
          ligula vel nunc egestas porttitor. Morbi lectus risus, iaculis vel,
          suscipit quis, luctus non, massa. Fusce ac turpis quis ligula lacinia
          aliquet. Mauris ipsum. Nulla metus metus, ullamcorper vel, tincidunt
          sed, euismod in, nibh. Quisque volutpat condimentum velit. Class
          aptent taciti sociosqu ad litora torquent per conubia nostra, per
          inceptos himenaeos.
        </p>

        <p
          >Nam nec ante. Sed lacinia, urna non tincidunt mattis, tortor neque
          adipiscing diam, a cursus ipsum ante quis turpis. Nulla facilisi. Ut
          fringilla. Suspendisse potenti. Nunc feugiat mi a tellus consequat
          imperdiet. <i>Sed dignissim lacinia nunc</i>. Vestibulum sapien. Proin
          quam. Etiam ultrices. Suspendisse in justo eu magna luctus suscipit.
          Sed lectus. Integer euismod lacus luctus magna. Quisque cursus, metus
          vitae pharetra auctor, sem massa mattis sem, at interdum magna augue
          eget diam.
        </p>

        <p
          >Vestibulum ante ipsum primis in faucibus orci luctus et ultrices
          posuere cubilia Curae; Morbi lacinia molestie dui. Praesent blandit
          dolor. Sed non quam. In vel mi sit amet augue congue elementum. Morbi
          in ipsum sit amet pede facilisis laoreet.
          <b>Suspendisse in justo eu magna luctus suscipit</b>. Donec lacus
          nunc, viverra nec, blandit vel, egestas et, augue. Vestibulum
          tincidunt malesuada tellus. Ut ultrices ultrices enim. Curabitur sit
          amet mauris. Morbi in dui quis est pulvinar ullamcorper. Nulla
          facilisi. Integer lacinia sollicitudin massa. Cras metus.
        </p>

        <p
          >Sed aliquet risus a tortor.
          <b>Donec lacus nunc, viverra nec, blandit vel, egestas et, augue</b>.
          Integer id quam. Morbi mi. Quisque nisl felis, venenatis tristique,
          dignissim in, ultrices sit amet, augue.
          <b>Morbi in dui quis est pulvinar ullamcorper</b>. Proin sodales
          libero eget ante. Nulla quam.
          <i
            >Vestibulum ante ipsum primis in faucibus orci luctus et ultrices
            posuere cubilia Curae; Morbi lacinia molestie dui</i
          >. Aenean laoreet. Vestibulum nisi lectus, commodo ac, facilisis ac,
          ultricies eu, pede. Ut orci risus, accumsan porttitor, cursus quis,
          aliquet eget, justo. Sed pretium blandit orci. Ut eu diam at pede
          suscipit sodales. Aenean lectus elit, fermentum non, convallis id,
          sagittis at, neque.
        </p>

        <p
          >Nullam mauris orci, aliquet et, iaculis et, viverra vitae, ligula.
          Nulla ut felis in purus aliquam imperdiet. Maecenas aliquet mollis
          lectus. Vivamus consectetuer risus et tortor.
          <i>Vestibulum tincidunt malesuada tellus</i>. Lorem ipsum dolor sit
          amet, consectetur adipiscing elit. Integer nec odio. Praesent libero.
          <b>Ut eu diam at pede suscipit sodales</b>. Sed cursus ante dapibus
          diam. Sed nisi. Nulla quis sem at nibh elementum imperdiet. Duis
          sagittis ipsum. Praesent mauris.
        </p>

        <p
          >Fusce nec tellus sed augue semper porta. Mauris massa. Vestibulum
          lacinia arcu eget nulla. Class aptent taciti sociosqu ad litora
          torquent per conubia nostra, per inceptos himenaeos. Curabitur sodales
          ligula in libero. Sed dignissim lacinia nunc. Curabitur tortor.
          Pellentesque nibh. Aenean quam. In scelerisque sem at dolor. Maecenas
          mattis. Sed convallis tristique sem. Proin ut ligula vel nunc egestas
          porttitor. Morbi lectus risus, iaculis vel, suscipit quis, luctus non,
          massa.
        </p>

        <p
          >Fusce ac turpis quis ligula lacinia aliquet. Mauris ipsum.
          <i>Mauris massa</i>. Nulla metus metus, ullamcorper vel, tincidunt
          sed, euismod in, nibh. Quisque volutpat condimentum velit. Class
          aptent taciti sociosqu ad litora torquent per conubia nostra, per
          inceptos himenaeos. Nam nec ante. Sed lacinia, urna non tincidunt
          mattis, tortor neque adipiscing diam, a cursus ipsum ante quis turpis.
          Nulla facilisi.
          <b
            >Morbi lectus risus, iaculis vel, suscipit quis, luctus non,
            massa</b
          >. Ut fringilla. Suspendisse potenti. <i>Maecenas mattis</i>. Nunc
          feugiat mi a tellus consequat imperdiet.
        </p>

        <p
          >Vestibulum sapien. Proin quam. Etiam ultrices. Suspendisse in justo
          eu magna luctus suscipit. Sed lectus. Integer euismod lacus luctus
          magna. Quisque cursus, metus vitae pharetra auctor, sem massa mattis
          sem, at interdum magna augue eget diam. Vestibulum ante ipsum primis
          in faucibus orci luctus et ultrices posuere cubilia Curae; Morbi
          lacinia molestie dui. Praesent blandit dolor. Sed non quam.
          <b>Nunc feugiat mi a tellus consequat imperdiet</b>. In vel mi sit
          amet augue congue elementum.
          <i
            >Nulla metus metus, ullamcorper vel, tincidunt sed, euismod in,
            nibh</i
          >. Morbi in ipsum sit amet pede facilisis laoreet.
        </p>

        <p
          >Donec lacus nunc, viverra nec, blandit vel, egestas et, augue.
          <b
            >Quisque cursus, metus vitae pharetra auctor, sem massa mattis sem,
            at interdum magna augue eget diam</b
          >. Vestibulum tincidunt malesuada tellus. Ut ultrices ultrices enim.
          <b>Suspendisse in justo eu magna luctus suscipit</b>. Curabitur sit
          amet mauris.
          <i
            >Nulla metus metus, ullamcorper vel, tincidunt sed, euismod in,
            nibh</i
          >. Morbi in dui quis est pulvinar ullamcorper. Nulla facilisi. Integer
          lacinia sollicitudin massa. Cras metus. Sed aliquet risus a tortor.
          Integer id quam. Morbi mi. Quisque nisl felis, venenatis tristique,
          dignissim in, ultrices sit amet, augue.
        </p>
      </section>
    </main>
    <script>
      //Scroll progress measure
      let articleElem = document.querySelector("#article");
      let progressBar = document.querySelector("#progressBar");

      let scrollPosition = (elem, progressBar) => {
        let scrollTop = elem["scrollTop"];
        let scrollBottom = elem["scrollHeight"] - elem["offsetHeight"];
        let scrollPosition = (scrollTop / scrollBottom) * 100;
        let scrollAmount = scrollPosition + "%";
        progressBar.style.setProperty("--scrollAmount", scrollAmount);
        return scrollPosition;
      };
    </script>
    <script>
      //Login modal manage
      let body = document.querySelector("body");
      let modalContainer = document.querySelector(".modal");
      let loginModal = document.querySelector("#login_form");
      let userDataPresentModal = document.querySelector("#userDataPresent");
      let formWindow = document.querySelector("#login_form");
      let btn_submit = document.querySelector("#btn_submit");
      let firstName = document.querySelector("#fname");
      let finalModalClose = document.querySelector("#userDataModalHide");

      function modalRender(modal) {
        modalContainer.style.display = "block";
        modal.style.display = "block";
      }

      //Server communication
      async function serverComms(url = ``) {
        let response = await fetch(url, {
          method: "GET",
          mode: "cors",
          headers: { "Content-Type": "application/json" },
        });
        return response;
      }

      //Sending name to API for storage of Start read time
      function softLogin(firstName) {
        //Simple name verification for number of letters, more verifications needed* for better security
        if (firstName.value.length < 2 || firstName.value.length > 20) {
          errorMessage = document.createElement("div");
          errorMessage.innerText = `Not a valid name. Please add a name with not less than 2 or more than 20 characters`;
          formWindow.appendChild(errorMessage);
          setTimeout(() => {
            formWindow.removeChild(errorMessage);
          }, 3000);
        } else {
          document.querySelector(
            "#welcomeMSG"
          ).innerText = `Welcome ${firstName.value}`;
          loginModal.style.display = "none";
          modalContainer.style.display = "none";
          serverComms(`http://localhost:8087/api/login/${firstName.value}`)
            .then((res) => res.json())
            .then((data) => {})
            .catch(function (err) {
              console.error("Something went wrong.", err);
            });
        }
      }
      //User introduction modal on page load
      body.addEventListener("load", modalRender(loginModal));
      btn_submit.addEventListener("click", (e) => {
        e.preventDefault();
        softLogin(firstName);
      });

      //Close/refresh window API request to store User session time
      window.addEventListener("beforeunload", () => {
        serverComms(`http://localhost:8087/api/endSession/${firstName.value}`)
          .then((res) => res.json())
          .then((data) => {})
          .catch(function (err) {
            localStorage.setItem("err", `${err}`);
            console.error("Something went wrong.", err);
          });
        //Hold on window close in order to finnish request for ending session- Better idea needed
        for (let index = 0; index < 2500; index++) {
          console.log("Storing your session time");
        }
      });

      //Scroll progress measure and action based on current read progress
      articleElem.addEventListener("scroll", (e) => {
        scrollPosition(articleElem, progressBar);
        if (scrollPosition(articleElem, progressBar) === 100) {
          modalRender(userDataPresentModal);
          serverComms(`http://localhost:8087/api/finishRead/${firstName.value}`)
            .then((res) => res.json())
            .then((data) => {
              document.querySelector(
                "#thankYou"
              ).innerText = `Thank you for enjoying the Article ${
                data[firstName.value].userName
              }`;
              document.querySelector(
                "#timeStarted"
              ).innerText = `You started reading on ${
                data[firstName.value].startReadTime
              }`;
              document.querySelector("#timeSpent").innerText = `You spent ${
                data[firstName.value].overallTimeSpent
              } to read the article`;
              document.querySelector(
                "#finnished"
              ).innerText = `You finished reading on ${
                data[firstName.value].endReadTime
              }`;
            })
            .catch(function (err) {
              localStorage.setItem("err", `${err}`);
              console.error("Something went wrong.", err);
            });
        }
      });
      // UserDataPresent modal remove for possibility to read text after finnishing it
      finalModalClose.addEventListener("click", (e) => {
        e.preventDefault();
        userDataPresentModal.style.display = "none";
        modalContainer.style.display = "none";
      });
    </script>
  </body>
</html>
